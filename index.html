<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TalentID Store</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0f172a;
  color:#e5e7eb;
  overflow-x:hidden;
}
header{
  background:linear-gradient(135deg,#2563eb,#06b6d4);
  padding:24px;
  text-align:center;
}
.container{padding:20px;max-width:900px;margin:auto}
.card{
  background:#020617;
  border-radius:14px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.3)
}
h2,h3{color:#38bdf8;margin-top:0}
label{display:block;margin-top:10px}
input,select,button{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:10px;
  border:none;
}
button{
  background:#22c55e;
  color:#052e16;
  font-weight:700;
  cursor:pointer;
}
hr{margin:15px 0;border:1px solid #1f2937}
.smallBtn{
  width:auto;
  padding:4px 8px;
  margin-left:6px;
  background:#ef4444;
  color:white;
}
.orderItem{
  background:#020617;
  border:1px solid #1f2937;
  padding:10px;
  border-radius:10px;
  margin-bottom:8px;
  font-size:14px;
}

/* ‚öôÔ∏è TOMBOL SETTING */
#settingBtn{
  position:fixed;
  top:15px;
  left:15px;
  width:44px;
  height:44px;
  border-radius:50%;
  background:#020617;
  color:#38bdf8;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1000;
}

/* ADMIN PANEL SLIDE */
#adminWrap{
  position:fixed;
  top:0;
  left:-320px;
  width:300px;
  height:100%;
  background:#020617;
  padding:16px;
  transition:.3s;
  z-index:999;
  overflow-y:auto;
  box-shadow:5px 0 20px rgba(0,0,0,.5);
}
#adminWrap.active{left:0}
</style>
</head>

<body>

<!-- üîî SOUND -->
<audio id="notifSound">
  <source src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3">
</audio>

<!-- ‚öôÔ∏è SETTING BUTTON -->
<div id="settingBtn" onclick="toggleAdmin()">‚öôÔ∏è</div>

<!-- ADMIN PANEL -->
<div id="adminWrap">
<h2>üîê Admin Dashboard</h2>
<input type="password" id="adminPass" placeholder="Password Admin">
<button onclick="loginAdmin()">Login</button>

<div id="adminPanel" style="display:none">
<hr>
<h3>‚ûï Tambah Game</h3>
<input id="newGameKey" placeholder="Kode Game">
<input id="newGameName" placeholder="Nama Game">
<button onclick="addGame()">Tambah Game</button>

<hr>
<h3>üíé Tambah Paket</h3>
<select id="adminGame"></select>
<input id="diamondName" placeholder="Nama Paket">
<input id="diamondPrice" type="number" placeholder="Harga">
<button onclick="addDiamond()">Tambah Paket</button>

<hr>
<h3>üìú Riwayat Order</h3>
<div id="orderHistory"></div>
</div>
</div>

<header>
<h1>TalentID Store</h1>
<p>Diamond FF ‚Ä¢ TheoTown ‚Ä¢ ML</p>
</header>

<div class="container">
<div class="card">
<h2>üìù Pembelian</h2>

<label>Game</label>
<select id="game" onchange="updateForm()"></select>

<div id="playerBox"></div>

<label>Paket Diamond</label>
<select id="paket" onchange="updateHarga()"></select>

<label>Metode Pembayaran</label>
<select id="payment">
<option value="">-- Pilih Metode --</option>
<option>DANA</option>
<option>OVO</option>
<option>GoPay</option>
</select>

<p>Total: <b id="totalHarga">Rp 0</b></p>
<button onclick="checkout()">Lanjut</button>
</div>
</div>

<script>
const ADMIN_PASS="admin123";
const ADMIN_WA="6285185620148";

let data=JSON.parse(localStorage.getItem("data"))||{
FF:{name:"Free Fire",paket:[["100 Diamond",15000]]},
ML:{name:"Mobile Legends",paket:[["86 Diamond",20000]]}
};
let orders=JSON.parse(localStorage.getItem("orders"))||[];

function save(){
localStorage.setItem("data",JSON.stringify(data));
localStorage.setItem("orders",JSON.stringify(orders));
render();
}

function render(){
game.innerHTML='<option value="">-- Pilih Game --</option>';
adminGame.innerHTML="";
for(let k in data){
game.innerHTML+=`<option value="${k}">${data[k].name}</option>`;
adminGame.innerHTML+=`<option value="${k}">${data[k].name}</option>`;
}
renderOrders();
}

function updateForm(){
playerBox.innerHTML='<label>ID Player</label><input id="idplayer">';
paket.innerHTML='<option value="">-- Pilih Paket --</option>';
data[game.value].paket.forEach(p=>{
paket.innerHTML+=`<option value="${p[1]}">${p[0]}</option>`;
});
updateHarga();
}

function updateHarga(){
totalHarga.innerText="Rp "+Number(paket.value||0).toLocaleString("id-ID");
}

function checkout(){
if(!game.value||!paket.value||!payment.value||!idplayer.value)
return alert("Lengkapi data");

let order={
game:game.options[game.selectedIndex].text,
id:idplayer.value,
paket:paket.options[paket.selectedIndex].text,
total:totalHarga.innerText,
pay:payment.value,
time:new Date().toLocaleString("id-ID")
};

orders.unshift(order);
save();
document.getElementById("notifSound").play();

let msg=`Halo Admin TalentID

Order Baru:
Game: ${order.game}
ID Player: ${order.id}
Paket: ${order.paket}
Pembayaran: ${order.pay}
Total: ${order.total}`;

window.open("https://wa.me/"+ADMIN_WA+"?text="+encodeURIComponent(msg),"_blank");
}

function loginAdmin(){
if(adminPass.value===ADMIN_PASS)
adminPanel.style.display="block";
else alert("Password salah");
}

function addGame(){
data[newGameKey.value]={name:newGameName.value,paket:[]};
save();
}

function addDiamond(){
data[adminGame.value].paket.push([diamondName.value,Number(diamondPrice.value)]);
save();
}

function renderOrders(){
orderHistory.innerHTML="";
orders.forEach(o=>{
orderHistory.innerHTML+=`
<div class="orderItem">
<b>${o.game}</b><br>
ID: ${o.id}<br>
${o.paket}<br>
${o.total} - ${o.pay}<br>
<small>${o.time}</small>
</div>`;
});
}

function toggleAdmin(){
adminWrap.classList.toggle("active");
}

/* üëÜ SWIPE */
let startX=0;
document.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
document.addEventListener("touchend",e=>{
let endX=e.changedTouches[0].clientX;
if(startX<50 && endX-startX>80) adminWrap.classList.add("active");
if(startX>200 && startX-endX>80) adminWrap.classList.remove("active");
});

render();
</script>

</body>
</html>
